import{Reason as a,transition as g}from"../components/transitions/utils/transition.js";import{disposables as E}from"../utils/disposables.js";import{match as n}from"../utils/match.js";import{useDisposables as M}from"./use-disposables.js";import{useIsMounted as T}from"./use-is-mounted.js";import{useIsoMorphicEffect as R}from"./use-iso-morphic-effect.js";import{useLatestValue as i}from"./use-latest-value.js";function x({container:u,direction:o,classes:c,events:t,onStart:d,onStop:l}){let f=T(),m=M(),e=i(o),b=i(()=>n(e.current,{enter:()=>t.current.beforeEnter(),leave:()=>t.current.beforeLeave(),idle:()=>{}})),p=i(()=>n(e.current,{enter:()=>t.current.afterEnter(),leave:()=>t.current.afterLeave(),idle:()=>{}}));R(()=>{let r=E();m.add(r.dispose);let s=u.current;if(!!s&&e.current!=="idle"&&!!f.current)return r.dispose(),b.current(),d.current(e.current),r.add(g(s,c.current,e.current==="enter",v=>{r.dispose(),n(v,{[a.Ended](){p.current(),l.current(e.current)},[a.Cancelled]:()=>{}})})),r.dispose},[o])}export{x as useTransition};
